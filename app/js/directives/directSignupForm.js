define(["directives/directives"],function(e){e.directive("directSignupForm",["$compile","deploydService","$cookies",function(e,t,n){function r(e,n){function r(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}n.find(".btnSubmit").on("click",function(i){e.errorFree=!0;var s=n.find("#inputName").val();if(s=="")return;if(s.length<5||s.length>15){n.find("#inputName").parent().find(".help-block").html("Length must between 5 - 15.").css("color","red"),e.errorFree=!1;return}n.find("#inputName").parent().find(".help-block").html("");var o=n.find("#inputDisplayName").val();if(o=="")return;if(o.length<5||o.length>15){n.find("#inputDisplayName").parent().find(".help-block").html("Length must between 5 - 15.").css("color","red"),e.errorFree=!1;return}n.find("#inputDisplayName").parent().find(".help-block").html("");var u=n.find("#inputEmail").val();if(u=="")return;if(r(u)!=1){n.find("#inputEmail").parent().find(".help-block").html("Invalid email.").css("color","red"),e.errorFree=!1;return}n.find("#inputEmail").parent().find(".help-block").html("");var a=n.find("#radGender input:radio:checked").val();if(a==undefined){n.find("#radGender").parent().find(".help-block").html("Please choose your gender.").css("color","red"),e.errorFree=!1;return}n.find("#radGender").parent().find(".help-block").html("");var f=n.find("#inputPassword").val(),l=n.find("#inputPasswordConfirm").val();if(f=="")return;if(f.length<6||f.length>15){n.find("#inputPassword").parent().find(".help-block").html("Password range 6 - 15 only.").css("color","red"),e.errorFree=!1;return}n.find("#inputPassword").parent().find(".help-block").html("");if(l=="")return;if(l!=f){n.find("#inputPasswordConfirm").parent().find(".help-block").html("password not match.").css("color","red"),e.errorFree=!1;return}n.find("#inputPasswordConfirm").parent().find(".help-block").html("");var c=$("#radFaculty input:radio:checked").val();if(c==undefined){n.find("#radFaculty").parent().find(".help-block").html("Please choose your faculty.").css("color","red"),e.errorFree=!1;return}n.find("#radFaculty").parent().find(".help-block").html("");if(e.errorFree){var h={};h.username=s,h.displayname=o,h.email=u,h.gender=a,h.password=f,h.status="active",h.role="student",h.faculty=c,t.CreateUser(h,function(e){e.id!=undefined?(n.modal("hide"),alert("Successful registered, now you may proceed to login."),n.parent().find("#my_login_Modal").modal("show")):e.status==400&&alert("username registered, try to use other name.")})}}),n.find(".btnCancel").on("click",function(e){n.find("#inputName").val(""),n.find("#inputPass").val(""),n.find(".invalidInput").hide()}),n.find(".faculty a").on("click",function(e){$(this).parents(".dropdown").find(".btn").html($(this).text()+' <span class="caret"></span>'),$(this).parents(".dropdown").find(".btn").val($(this).text())})}return{restrict:"E",template:'<div class="modal fade" id="my_signup_Modal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Registration</h4></div><form role="form" class="registrationForm"><div class="form-group"><label for="inputName" class="control-label">Name</label><input type="text" class="form-control" id="inputName" data-minlength="5" maxlength="15" placeholder="Use for login (Min 5, Max 15 words)." required><div class="help-block with-errors"></div></div><div class="form-group"><label for="inputName" class="control-label">Display Name</label><input type="text" class="form-control" id="inputDisplayName" data-minlength="5" maxlength="15" placeholder="Display Name (Min 5, Max 15 words)." required><div class="help-block with-errors"></div></div><div class="form-group"><label for="inputEmail" class="control-label">Email</label><input type="email" class="form-control" id="inputEmail" placeholder="Email" data-error="Bruh, that email address is invalid" required><div class="help-block with-errors"></div></div><div class="form-group"><label for="gender" class="control-label">Gender : </label><div class="btn-group" id="radGender" data-toggle="buttons"><label class="btn btn-default blue"><input type="radio" class="radgender" value="male"/>Male</label><label class="btn btn-default blue"><input type="radio" class="radgender" value="female"/> Female</label><label class="btn btn-default blue"><input type="radio" class="radgender" value="unknown"/> Unknown</label></div><div class="help-block with-errors"></div></div><div class="form-group"><label for="inputPassword" class="control-label">Password</label><div class="form-group"><input type="password" data-minlength="6" maxlength="15" class="form-control" id="inputPassword" placeholder="Minimum of 6 characters" required><div class="help-block with-errors"></div></div><div class="form-group"><input type="password" class="form-control" id="inputPasswordConfirm" data-match="#inputPassword" data-match-error="passwordn not match" placeholder="Confirm Passsword" required><div class="help-block with-errors"></div></div></div><div class="form-group"><label for="gender" class="control-label">Faculty : </label><div class="btn-group" id="radFaculty" data-toggle="buttons"><label class="btn btn-default blue"><input type="radio" class="radfaculty" value="FASC"/>FASC</label><label class="btn btn-default blue"><input type="radio" class="radfaculty" value="FAFB"/> FAFB</label><label class="btn btn-default blue"><input type="radio" class="radfaculty" value="FEBE"/> FEBE</label><label class="btn btn-default blue"><input type="radio" class="radfaculty" value="FSAH"/> FSAH</label><label class="btn btn-default blue"><input type="radio" class="radfaculty" value="CPUS"/> CPUS</label></div><div class="help-block with-errors"></div></div><div class="modal-footer form-group"><button type="submit" class="btn btn-default btnSubmit">Submit</button></div></form></div></div></div>',controller:["$scope","$element",r],replace:!0}}])});