define(["controllers/controllers"],function(e){"use strict";e.controller("menuController",["$scope","$element","$cookies","deploydService","authServices","$rootScope",function(e,t,n,r,i,s){e.loginType=undefined,i.GetCurrentUser(function(n){n!=-1?n.status=="active"&&(t.find(".logined").show(),t.find(".logouted").hide(),t.find(".logined").removeClass("ng-hide"),e.displayname=n.displayname,e.knowUser=!0,e.unknowUser=!1,e.loginType=n.role=="FB"?"facebook":"deployd"):(t.find(".logouted").show(),t.find(".logined").hide(),t.find(".logouted").removeClass("ng-hide"),e.knowUser=!1,e.unknowUser=!0)}),e.createNewPost=function(){t.parent().find("#my_create_post_Modal").modal("show"),s.$broadcast("createPost")},e.toLogin=function(){t.parent().find("#my_login_Modal").modal("show")},e.toSignUp=function(){t.parent().find("#my_signup_Modal").modal("show")},e.userSetting=function(e){e=="password"?t.parent().find("#my_settingPW_Modal").modal("show"):(t.parent().find("#my_setting_Modal").modal("show"),s.$broadcast("userSetting"))},e.toLogout=function(){e.loginType=="facebook"?i.UserFacebookLogout(function(n){n.status=="unknown"?(t.find(".logined").hide(),t.find(".logouted").show(),t.find(".logouted").removeClass("ng-hide"),e.knowUser=!1,e.unknowUser=!0,s.deploydLoginDisplayaname=undefined,s.deploydLoginUsername=undefined,s.$broadcast("refreshPost")):console.debug("logout error")}):e.loginType=="deployd"?i.UserDeploydLogout(function(n){n==0?(t.find(".logined").hide(),t.find(".logouted").show(),t.find(".logouted").removeClass("ng-hide"),e.knowUser=!1,e.unknowUser=!0,s.deploydLoginDisplayaname=undefined,s.deploydLoginUsername=undefined,s.$broadcast("refreshPost")):console.debug("logout error")}):console.debug("logout error")},e.fbAuth=function(){i.UserFacebookLogin(function(n){n.status=="active"?(t.find(".logined").show(),t.find(".logouted").hide(),t.find(".logined").removeClass("ng-hide"),e.displayname=n.displayname,e.knowUser=!0,e.unknowUser=!1,e.loginType="facebook",s.$broadcast("refreshPost")):(console.debug("no login"),t.find(".logouted").show(),t.find(".logined").hide(),t.find(".logouted").removeClass("ng-hide"),e.knowUser=!1,e.unknowUser=!0)})},t.find(".dropdown").removeClass("open"),t.find(".dropdown").find("#dropdownMenu1").css("visibility","visible"),t.find(".dropdown").find(".dropdown-menu").css("visibility","visible"),s.$on("deploydLoginDetails",function(n){e.loginType="deployd",e.displayname=s.deploydLoginDisplayaname,e.knowUser=!0,e.unknowUser=!1,t.parent().find(".logined").show(),t.parent().find(".logined").removeClass("ng-hide"),t.parent().find(".logouted").hide()}),s.$on("deploydLoginDetailsChanged",function(t,n){e.displayname=n.value})}])});